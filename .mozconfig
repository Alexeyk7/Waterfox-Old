. $topsrcdir/browser/config/mozconfig

export CC="icl"
export CXX="icl"
export LD="xilink"
export AR="xilib"

ac_add_options --enable-application=browser
mk_add_options MOZ_MAKE_FLAGS=-j6

mk_add_options MOZ_OBJDIR=objdir

# enable updater
ac_add_options --enable-update-channel=release
ac_add_options --enable-updater
ac_add_options --enable-update-packaging

# for 64-bit build
ac_add_options --target=x86_64-pc-mingw32
ac_add_options --host=x86_64-pc-mingw32

# for 64-bit build
export MOZ_OPTIMIZE_LDFLAGS="-FORCE"
mk_add_options MOZ_OPTIMIZE_LDFLAGS="-FORCE"

# Use to use profiling
ac_add_options --enable-optimize="-Qstd=c++11 -D_ATL_XP_TARGETING -O1 -arch:SSE3 -w"

ac_add_options --enable-require-d3d-compilers
ac_add_options --disable-websms-backend
ac_add_options --disable-webapp-runtime
ac_add_options --disable-verify-mar
ac_add_options --disable-jemalloc
ac_add_options --disable-eme
ac_add_options --disable-maintenance-service
ac_add_options --disable-services-healthreport
ac_add_options --disable-telemetry-reporting
ac_add_options --disable-tests
ac_add_options --disable-ipdl-tests
ac_add_options --disable-profiling
ac_add_options --disable-js-diagnostics
ac_add_options --disable-crashreporter

# for X64
WIN32_REDIST_DIR=$VCINSTALLDIR/redist/x64/Microsoft.VC120.CRT
